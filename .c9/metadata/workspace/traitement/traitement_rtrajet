{"filter":false,"title":"traitement_rtrajet","tooltip":"/traitement/traitement_rtrajet","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":76,"column":2},"action":"insert","lines":["<?php","    // inclusion de la page permettant la connexion a la bdd","\tinclude('../connexionDB.php');","\t    ","\t    //Test si la variable \"$_POST['nom']\" existe ET si celle ci n'est pas vide","\t\tif(isset($_POST['n_depart']) && $_POST['n_depart'] != \"\" ","\t\t    && isset($_POST['a_depart']) && $_POST['a_depart'] != \"\" ","\t\t    && isset($_POST['cp_depart']) && $_POST['cp_depart'] != \"\"","\t\t    && isset($_POST['v_depart']) && $_POST['v_depart'] != \"\"","\t\t    && isset($_POST['date_depart']) && $_POST['date_depart'] != \"\"","\t\t    && isset($_POST['heure_depart']) && $_POST['heure_depart'] != \"\"","\t\t    && isset($_POST['allez_retour']) && $_POST['allez_retour'] != \"\"","\t\t    && isset($_POST['prix']) && $_POST['prix'] != \"\" ","\t\t    && isset($_POST['commentaire'])","\t\t    && isset($_POST['flexibilite_depart']) && $_POST['flexibilite_depart'] != \"\"","\t\t    && isset($_POST['detour']) && $_POST['detour'] != \"\"","\t\t    && isset($_POST['n_arrive']) && $_POST['n_arrive'] != \"\" ","\t\t    && isset($_POST['a_arrive']) && $_POST['a_arrive'] != \"\" ","\t\t    && isset($_POST['cp_arrive']) && $_POST['cp_arrive'] != \"\"","\t\t    && isset($_POST['v_arrive']) && $_POST['v_arrive'] != \"\"","\t\t    && isset($_POST['date_retour'])","\t\t    && isset($_POST['heure_retour'])","\t\t    ) {","             ","            /*strip_tags : desactive et transforme en texte simpte ","            toute balise HTML se qui permet d'evitée une partie des attaques par injection de code*/","            ","\t\t\t$n_depart = strip_tags($_POST['n_depart']);","\t\t\t$a_depart = strip_tags($_POST['a_depart']);","\t\t\t$cp_depart = strip_tags($_POST['cp_depart']);","\t\t\t$v_depart = strip_tags($_POST['v_depart']);","\t\t\t$date_depart = strip_tags($_POST['date_depart']);","\t\t\t$heure_depart = strip_tags($_POST['heure_depart']);","\t\t\t$allez_retour = strip_tags($_POST['allez_retour']);","\t\t\t$prix = strip_tags($_POST['prix']);","\t\t\t$commentaire = strip_tags($_POST['commentaire']);","\t\t\t$flexibilite_depart = strip_tags($_POST['flexibilite_depart']);","\t\t\t$detour = strip_tags($_POST['detour']);","\t\t\t$n_arrive = strip_tags($_POST['n_arrive']);","\t\t\t$a_arrive = strip_tags($_POST['a_arrive']);","\t\t\t$cp_arrive = strip_tags($_POST['cp_arrive']);","\t\t\t$v_arrive = strip_tags($_POST['v_arrive']);","\t\t\t$date_retour = strip_tags($_POST['date_retour']);","\t\t\t$heure_retour = strip_tags($_POST['heure_retour']);","            ","            ","\t\t\t","\t\t    //preparation de la requete SQL","\t\t\t$req1 = $bdd->prepare('INSERT INTO trajet(n_depart, v_depart, a_depart, cp_depart, date_depart, heure_depart, allez_retour, prix, commentaire, flexibilite_depart, detour, n_arrive, a_arrive, cp_arrive, v_arrive, date_retour, heure_retour)","\t\t\t\t\t\t\t\t\tVALUES (:n_depart, :v_depart, :a_depart, :cp_depart, :date_depart, :heure_depart, :allez_retour, :prix, :commentaire, :flexibilite_depart, :detour, :n_arrive, :a_arrive, :cp_arrive, :v_arrive, :date_retour, :heure_retour)');","\t\t\t//Execution de la requete SQL","\t\t\t$req1->execute(array(","\t\t\t\t'n_depart' => $n_depart,","\t\t\t\t'a_depart' => $a_depart,","\t\t\t\t'v_depart' => $v_depart,","\t\t\t\t'cp_depart' => $cp_depart,","\t\t\t\t'date_depart' => $date_depart,","\t\t\t\t'heure_depart' => $heure_depart,","\t\t\t\t'allez_retour' => $allez_retour,","\t\t\t\t'prix' => $prix,","\t\t\t\t'commentaire' => $commentaire,","\t\t\t\t'flexibilite_depart' => $flexibilite_depart,","\t\t\t\t'detour' => $detour,","\t\t\t\t'n_arrive' => $n_arrive,","\t\t\t\t'a_arrive' => $a_arrive,","\t\t\t\t'cp_arrive' => $cp_arrive,","\t\t\t\t'v_arrive' => $v_arrive,","\t\t\t\t'date_retour' => $date_retour,","\t\t\t\t'heure_retour' => $heure_retour","\t\t\t\t));","\t\t\t\t","\t\t//Redirection du client sur la page indiqué\t\t","\t\theader('Location: ../index.php');","\t\texit;","\t\t}","\t\t","?>"],"id":97}]]},"ace":{"folds":[],"scrolltop":484,"scrollleft":0,"selection":{"start":{"row":46,"column":3},"end":{"row":46,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":29,"state":"start","mode":"ace/mode/text"}},"timestamp":1495885773343,"hash":"57ba18cff4a4bc9f8a05e4735d780b43fa45ed64"}